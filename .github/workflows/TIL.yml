name: Push specific folder to another repo

on:
  push:
    branches: [main]

jobs:
  push-to-another-repo:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Contigure git
        run: |
          git config --global user.name 'YHK[BOT]'
          git config --global user.email 'ghrbs0437[BOT]@no.reply'
        
      - name: Add target repository as a remote
        run: |
          git remote set-url --push origin https://ghrbs0437:${{ secrets.AUTO_PS_PUSH }}@github.com/ghrbs0437/CodingStudy
          git fetch origin

      - name: Push changes to the target repository
        run: |
          git push target_repo master
        env:
          API_TOKEN_GITHUB: ${{ secrets.AUTO_PS_PUSH }}  # SolvePS 리포지토리의 secret
