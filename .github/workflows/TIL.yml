name: Push specific folder to another repo

on:
  push:
    branches: [main]

jobs:
  push-to-another-repo:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      - name: Contigure git
        run: |
          git config --global user.name 'YHK[BOT]'
          git config --global user.email 'ghrbs0437[BOT]@no.reply'

      - name: Add target repository as a remote
        run: |
          git remote add origin https://${{ secrets.AUTO_PS_PUSH }}@github.com/ghrbs0437/CodingStudy.git
          git fetch origin
          git add .
          git commit -m "Auto commit by GitHub Action" || echo "No changes to commit"
          git push
        env:
          API_TOKEN_GITHUB: ${{ secrets.AUTO_PS_PUSH }}  # SolvePS 리포지토리의 secret
